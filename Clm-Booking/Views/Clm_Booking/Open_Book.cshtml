@model Clm_Booking.Models.ClientClm

@{
    ViewBag.Title = "Open Book";
}


@section css{
    
    <style>
        #timepicker:before {
            content: 'Time: HR:MM: AM/PM';
            margin-right: .6em;
            color: #9d9d9d;
        }

        a {
            text-decoration: none;
        }

            a:hover {
                color: cadetblue;
                text-decoration: none;
            }
    </style>

}
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />

<div style="padding:4rem;">
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        <div class="container">
            <h4>Schedule Appointment</h4>
            <b style="color:darkred;"> @ViewBag.Success </b>
            <hr />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                @Html.LabelFor(model => model.firstname, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.firstname, new { htmlAttributes = new { @class = "form-control", placeholder = "First Name" } })
                    @Html.ValidationMessageFor(model => model.firstname, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.lastname, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.lastname, new { htmlAttributes = new { @class = "form-control", placeholder = "Last Name" } })
                    @Html.ValidationMessageFor(model => model.lastname, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.bookdate, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.bookdate, new { htmlAttributes = new { @class = "form-control dates", placeholder = "Date" } })
                    @Html.ValidationMessageFor(model => model.bookdate, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.booktime, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.booktime, new { htmlAttributes = new { @class = "form-control", id = "timepicker", placeholder = "Time" } })
                    @Html.ValidationMessageFor(model => model.booktime, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.email, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.email, new { htmlAttributes = new { @class = "form-control", placeholder = "Email" } })
                    @Html.ValidationMessageFor(model => model.email, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.phonenumber, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.phonenumber, new { htmlAttributes = new { @class = "form-control", placeholder = "Phone Number" } })
                    @Html.ValidationMessageFor(model => model.phonenumber, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.comments, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.TextAreaFor(model => model.comments, new { @class = "form-control", cols = "3" })
                    @Html.ValidationMessageFor(model => model.comments, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Book Appointment" class="btn btn-primary" />
                </div>
            </div>
        </div>
    }

</div>

@section Scripts{
    <script>
        $(document).ready(function () {

            $.get("/Clm_Booking/GetAvailableDate", function (data) {
                var reservation = data.dates;
                $('.dates').datepicker({
                    beforeShowDay: function (date) {
                        var string = $.datepicker.formatDate('dd-mm-yyyy', date);
                        return [reservation.indexOf(string) == -1]
                    }
            });
            });

            $('.dates').datepicker({
                    beforeShowDay:$.datepicker.noWeekends
            });

            $('#timepicker').timepicker({
                'minTime': '9:30am',
                'maxTime': '5:00pm',
                'disableTimeRanges': ['01:00pm', '02:30pm']
            });


            


            //$('#timepicker').select(function(){
            //    if (timepicked === '01:00pm' || timepicked === '01:30pm' || timepicked === '02:00pm') {
            //    alert("Cannot pick this time");
            //}
            //});


        });
    </script>



}



